# 統計分析法　第一回レポート

## 実行環境

python3.9

- pipenv

(これ以降のモジュールは`pipenv update`でダウンロードできます)

- pandas
- matplotlib
- cogapp
- scipy
- scikit-learn

## ファイルのエンコーディングについて

`output/pokemon.txt`,`output/seiseki.txt`については、shift-jisで読み込むことができたが、`output/baseball.txt`については、shift-jisでエンコーディングしても、エラーが出たため、UTF-8でエンコーディングしている。

## 主成分分析の流れについて

主成分分析は`sklearn.decomposition.PCA`を用いて行った。

データについては、比例尺度を取り出した後、標準化して渡している。

また、固有値、寄与率はぞれぞれ、`sklearn.decomposition.PCA.explained_variance`,`sklearn.decomposition.PCA.explained_variance_ratio`を用いて取得し、累積寄与率は、`numpy.cumsum()`を使って、計算した。

## 中学生の成績データの分析

成績のデータは、すべて比例尺度であるため、すべてのデータを主成分分析に用いた。

#### 実行結果

今回、入力に使ったデータ、主成分得点、固有値・寄与率・累積寄与率、固有ベクトルを順に示す。

[source code](seiseki-analize.py)


<!-- [[[cog
import cog
file="output/seiseki-analize.txt"
cog.outl("\n```bash")
with open(file,"r") as f:
    cog.outl(f.read())
cog.outl("```")
    ]]] -->

```bash
$ pipenv run python3 seiseki-analize.py
data:
   kokugo  shakai  sugaku   rika  ongaku  bijutu  taiiku  gika  eigo
0    30.0    43.0    51.0   63.0    60.0    66.0    37.0  44.0  20.0
1    39.0    21.0    49.0   56.0    70.0    72.0    56.0  63.0  16.0
2    29.0    30.0    23.0   57.0    69.0    76.0    33.0  54.0   6.0
3    95.0    87.0    77.0  100.0    77.0    82.0    78.0  96.0  87.0
4    70.0    71.0    78.0   67.0    72.0    82.0    46.0  63.0  44.0
score:
        PC1       PC2       PC3  ...       PC7       PC8       PC9
0  0.056415  0.916870 -0.115763  ... -0.366566  0.271820 -0.091322
1 -0.147906 -0.000470  0.659867  ...  0.438794 -0.209384 -0.060319
2  0.540050  0.542761  0.963296  ... -0.341034 -0.500300  0.156104
3 -5.107249  0.228059  0.625819  ... -0.301719  0.242537  0.313485
4 -2.636544  0.661026  0.012114  ...  0.195361  0.287273 -0.632364

[5 rows x 9 columns]
states:
     eigenvalue  contribution  contributioin_sum
PC1    6.006431      0.667381           0.667381
PC2    1.098185      0.122021           0.789402
PC3    0.490842      0.054538           0.843940
PC4    0.406976      0.045220           0.889159
PC5    0.300260      0.033362           0.922522
PC6    0.221459      0.024607           0.947128
PC7    0.182787      0.020310           0.967438
PC8    0.171195      0.019022           0.986460
PC9    0.121864      0.013540           1.000000
component:
       kokugo    shakai    sugaku  ...    taiiku      gika      eigo
PC1 -0.362639 -0.368570 -0.356895  ... -0.139248 -0.316726 -0.356949
PC2 -0.149422  0.147029  0.181437  ... -0.859298  0.148958  0.046610
PC3  0.073623 -0.061551 -0.399680  ... -0.080264  0.783869 -0.317273
PC4 -0.236443 -0.106524  0.029476  ... -0.284248 -0.293357 -0.354812
PC5 -0.301468 -0.086651 -0.061124  ...  0.268566  0.189814 -0.338372

[5 rows x 9 columns]

```
<!-- [[[end]]] -->

[主成分得点のすべてのデータ](output/score_score.csv)

[固有ベクトルのすべてのデータ](output/score_component.csv)

また、各生徒と各科目を第一・第二主成分でプロットしたものを順に示す。

![distribute](output/score_distribute.png)

![heatvector](output/score_heatvector.png)

科目と主成分との関係を見ると、音楽、数学、社会など、日頃の予習・復習が必要な科目が第一主成分の係数が大きく、技術・家庭・音楽など、単語の暗記が多く必要な科目が第二主成分と係数が大きくなっている。

そのことから、中学生のテストの成績の第一主成分は日頃の演習、第二主成分は物覚えのよさだと考える。